<div class="wrapper">
  <div class="wrapper__logo">
    <embed
      src="assets/images/docstream_logo.svg"
      alt="Docstream Logo"
    />
  </div>
  <div class="wrapper__header">
    <h1>Create New Password</h1>
    <p>Create a new password to access your account</p>
  </div>
  <div class="wrapper__form">
    <app-error [error_message]="error_message"></app-error>
    <form [formGroup]="resetPasswordForm">
        <div class="form_group mb-5">
          <label for="password" class="form-label"
            >Password
            <span>● </span>
          </label>
          <div class="position-relative">
            <input
              class="form-control pr-2"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="Password"
              placeholder="Enter new password"
              [ngClass]="{
                'is-invalid':
                  (resetPasswordForm.get('Password')?.errors &&
                  resetPasswordForm.get('Password')?.touched) ||
                  (resetPasswordForm.get('Password')?.hasError('required') &&
                  passwordFormSubmitted) ||
                  (resetPasswordForm.get('Password')?.hasError('Password') && passwordFormSubmitted)
              }"
            />
            <i
              class="fa fa-eye-slash click"
              *ngIf="showPassword; else hidePassword"
              (click)="showPassword = !showPassword"
            ></i>
            <ng-template #hidePassword>
              <i
                class="fa fa-eye click"
                (click)="showPassword = !showPassword"
              ></i>
            </ng-template>
          </div>
          <div class="text-danger" 
              *ngIf="resetPasswordForm.get('Password')?.invalid &&
              resetPasswordForm.get('Password')?.value != '' 
            ">
              <span>Password must container at least 8 character with one uppercase, one lowercase and one number</span>
            </div>
            <div
              class="text-danger"
              *ngIf="
              resetPasswordForm.get('Password')?.value == ''
              "
            >
              Required
            </div>
        </div>
        <div class="form_group mb-3">
          <label for="confirmPassword" class="form-label"
            >Confirm Password
            <span>● </span>
          </label>
          <div class="position-relative">
            <input
              class="form-control pr-2"
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmPassword"
              placeholder="Re-enter new password"
              [ngClass]="{
                'is-invalid':
                resetPasswordForm.errors &&
                resetPasswordForm.get('confirmPassword')?.touched
              }"
            />
            <i
              class="fa fa-eye-slash click"
              *ngIf="showConfirmPassword; else hideConfirmPassword"
              (click)="showConfirmPassword = !showConfirmPassword"
            ></i>
            <ng-template #hideConfirmPassword>
              <i
                class="fa fa-eye click"
                (click)="showConfirmPassword = !showConfirmPassword"
              ></i>
            </ng-template>
          </div>
          <div class="text-danger"
              *ngIf="resetPasswordForm.get('Password')?.value !== resetPasswordForm.get('confirmPassword')?.value"
            >
              Passwords must match
            </div>
        </div>
        <button class="btn wrapper__login_btn" (click)="submit()">
          <app-loading-button
            [text]="'Reset Password'"
            [condition]="isLoading"
          ></app-loading-button>
        </button>
    </form>
  </div>
</div>
